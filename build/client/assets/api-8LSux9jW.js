const a="http://127.0.0.1:5000";function s(){if(typeof window>"u")return null;try{return localStorage.getItem("token")}catch(t){return console.error("Error reading token from localStorage:",t),null}}function i(t={}){const e=new Headers(t),r=s();return r&&e.set("Authorization",`Bearer ${r}`),e.has("Content-Type")||e.set("Content-Type","application/json"),e}async function u(t,e={}){const r=`${a}${t}`,n=i(e.headers);return await fetch(r,{...e,headers:n})}async function d(t,e){const r=s(),n={};r&&(n.Authorization=`Bearer ${r}`);const o=await fetch(`${a}${t}`,{method:"POST",headers:n,body:e});if(!o.ok){const c=await o.json().catch(()=>({error:o.statusText}));throw new Error(c.error||`Upload failed: ${o.status}`)}return o.json()}export{a as A,u as a,d as b};
