import{a as e,p as I}from"./chunk-PVWAREVJ-gVtuFcjs.js";const u=e.createContext(null);function h({children:o}){const[l,r]=e.useState(!1),[c,s]=e.useState(null),[g,i]=e.useState(!0);e.useEffect(()=>{m()},[]);const m=()=>{const n=localStorage.getItem("token"),t=localStorage.getItem("user");if(n&&t)try{const a=JSON.parse(t);s(a),r(!0)}catch(a){console.error("Invalid user data in localStorage:",a),localStorage.removeItem("token"),localStorage.removeItem("user")}i(!1)},S=(n,t)=>{localStorage.setItem("token",n),localStorage.setItem("user",JSON.stringify(t)),s(t),r(!0)},d=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),r(!1),s(null)};return I.jsx(u.Provider,{value:{isLoggedIn:l,user:c,login:S,logout:d,loading:g},children:o})}function v(){const o=e.useContext(u);if(!o)throw new Error("useAuth must be used within an AuthProvider");return o}export{h as A,v as u};
