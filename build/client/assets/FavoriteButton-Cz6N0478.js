import{a as x,p}from"./chunk-PVWAREVJ-gVtuFcjs.js";import{F as $,c as h}from"./index-D2MXpevW.js";import{u as y}from"./AuthContext-D4lhteYI.js";import{a as E}from"./api-8LSux9jW.js";/*!
 * Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2025 Fonticons, Inc.
 */var S={prefix:"far",iconName:"heart",icon:[512,512,[128153,128154,128155,128156,128420,129293,129294,129505,9829,10084,61578],"f004","M378.9 80c-27.3 0-53 13.1-69 35.2l-34.4 47.6c-4.5 6.2-11.7 9.9-19.4 9.9s-14.9-3.7-19.4-9.9l-34.4-47.6c-16-22.1-41.7-35.2-69-35.2-47 0-85.1 38.1-85.1 85.1 0 49.9 32 98.4 68.1 142.3 41.1 50 91.4 94 125.9 120.3 3.2 2.4 7.9 4.2 14 4.2s10.8-1.8 14-4.2c34.5-26.3 84.8-70.4 125.9-120.3 36.2-43.9 68.1-92.4 68.1-142.3 0-47-38.1-85.1-85.1-85.1zM271 87.1c25-34.6 65.2-55.1 107.9-55.1 73.5 0 133.1 59.6 133.1 133.1 0 68.6-42.9 128.9-79.1 172.8-44.1 53.6-97.3 100.1-133.8 127.9-12.3 9.4-27.5 14.1-43.1 14.1s-30.8-4.7-43.1-14.1C176.4 438 123.2 391.5 79.1 338 42.9 294.1 0 233.7 0 165.1 0 91.6 59.6 32 133.1 32 175.8 32 216 52.5 241 87.1l15 20.7 15-20.7z"]};function v({itemId:o,itemType:a,isFavorited:t,onToggle:n}){const[s,c]=x.useState(!1),{user:e,login:m}=y(),d=async i=>{if(i.preventDefault(),i.stopPropagation(),!!e){c(!0);try{const r=a==="course"?`/users/${e.id}/favourite-courses${t?`/${o}`:""}`:`/users/${e.id}/saved-blogs${t?`/${o}`:""}`,g=t?"DELETE":"POST",b=t?void 0:JSON.stringify({[a==="course"?"course_id":"blog_id"]:o}),l=await E(r,{method:g,body:b});if(!l.ok)throw new Error("Failed to update favorite");const u=await l.json(),f=localStorage.getItem("token");f&&(localStorage.setItem("user",JSON.stringify(u)),m(f,u)),n&&n(!t)}catch(r){console.error("Error toggling favorite:",r)}finally{c(!1)}}};return p.jsx("button",{className:`btn btn-sm ${t?"btn-danger":"btn-outline-danger"} position-absolute bottom-0 start-0 m-2 z-3 border-0`,onClick:d,disabled:s,title:t?"Remove from favorites":"Add to favorites",style:{opacity:s?.6:1,transition:"all 0.2s ease",borderRadius:"12px"},children:p.jsx($,{icon:t?h:S,className:s?"animate-pulse":""})})}export{v as F};
